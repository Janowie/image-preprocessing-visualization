(this.webpackJsonpvisualize=this.webpackJsonpvisualize||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},34:function(e,t){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(2),r=n.n(a),l=n(19),s=n.n(l),i=(n(25),n(26),n.p+"static/media/mario.e404dc0e.png"),o=n(14),u=n(4),b=n(6),j=n(39),d=n.p+"static/media/mario_bg.d6578ab6.png";function x(e){var t=r.a.useRef(null),n=r.a.useRef(null),a=r.a.useState({ctx:null,ctx_output:null}),l=Object(b.a)(a,2),s=l[0],i=l[1];r.a.useEffect((function(){t&&n&&(e.state.image.crossOrigin="anonymous",e.state.image.src=d,e.state.image.onload=function(){h(),i(Object(u.a)(Object(u.a)({},s),{},{ctx:t.current.getContext("2d"),ctx_output:n.current.getContext("2d")}))})}),[t,n]),r.a.useEffect((function(){s.ctx&&p(0,0)}),[s.ctx]),r.a.useEffect((function(){null==e.state.interval&&e.state.pixel_size>0&&h()}),[e.state.pixel_size,e.state.background_color]),r.a.useEffect((function(){e.tick_counter&&v()})),r.a.useEffect((function(){e.state.reset&&(h(),v())}),[e.state.reset]);var o=function(t,n,c,a,r){t.beginPath(),t.moveTo(n,c),t.lineTo(a,r),t.strokeStyle="rgba(182,182,182,0.5)",e.state.pixel_size<3&&(t.strokeStyle="rgba(182,182,182,0.01)"),t.stroke()},x=function(t){for(var n=t.getContext("2d"),c=0;c<t.height;c+=e.state.pixel_size)o(n,0,c,t.width,c),o(n,c,0,c,t.height)},f=function(t){var n=t.getContext("2d"),c=e.state.pixel_size;n.fillStyle=e.state.background_color,n.fillRect(0,0,1e3,1e3),n.drawImage(e.state.image,c,c,t.height-2*c,t.width-2*c),x(t)},h=function(){f(t.current);var c=n.current.getContext("2d");c.fillStyle=e.state.background_color,c.fillRect(0,0,1e3,1e3),x(n.current)},g=function(e,t){return s.ctx?s.ctx.getImageData(e,t,1,1).data:[]},p=function(t,n){var c=e.state.kernel_size*e.state.pixel_size-1,a=2;s.ctx.fillStyle="rgba(44, 62, 80,0.5)",s.ctx.fillRect(t,n,c,c),s.ctx.strokeStyle="rgba(241, 196, 15,1.0)",s.ctx.strokeRect(t,n,c,c);for(var r=0;r<e.state.kernel_size;r++)for(var l=0;l<e.state.kernel_size;l++)a=1===l&&1===r?6:2,s.ctx.fillRect(t+e.state.pixel_size/2+e.state.pixel_size*l-a/2,n+e.state.pixel_size/2+e.state.pixel_size*r-a/2,a,a)},v=function(){if(!s.ctx)return null;var n=e.tick_counter.x*e.state.pixel_size,c=e.tick_counter.y*e.state.pixel_size;f(t.current);var a=function(t,n){for(var c=[],a=0;a<e.state.kernel_size;a++)for(var r=0;r<e.state.kernel_size;r++)c.push(g(t+e.state.pixel_size/2+e.state.pixel_size*r,n+e.state.pixel_size/2+e.state.pixel_size*a));return c}(n,c);p(n,c),function(t,n,c){s.ctx_output&&(s.ctx_output.fillStyle=c,s.ctx_output.fillRect(t,n,e.state.pixel_size,e.state.pixel_size))}(n+e.state.pixel_size,c+e.state.pixel_size,function(t,n,c){var a=e.kernel,r=function(e){for(var t=[],n=[],c=[],a=[],r=0;r<e.length;r++)t.push(e[r][0]),n.push(e[r][1]),c.push(e[r][2]),a.push(e[r][3]);return[t,n,c,a]}(c),l="rgba(255,255,255,0)";try{l="rgba(".concat(Object(j.a)(r[0],a),",").concat(Object(j.a)(r[1],a),",").concat(Object(j.a)(r[2],a),",255)")}catch(s){}return l}(0,0,a))};return Object(c.jsxs)("div",{className:"row mb-5",children:[Object(c.jsxs)("div",{className:"col-lg-6 col-md-12 col-sm-12",children:[Object(c.jsx)("h3",{children:" Original "}),Object(c.jsx)("canvas",{ref:t,width:"640",height:"640",children:"Your browser does not support the HTML5 canvas tag."})]}),Object(c.jsxs)("div",{className:"col-lg-6 col-md-12 col-sm-12",children:[Object(c.jsx)("h3",{children:" Filtered "}),Object(c.jsx)("canvas",{ref:n,width:"640",height:"640",children:"Your browser does not support the HTML5 canvas tag."})]})]})}var f=n(7);function h(e){return Object(c.jsxs)("div",{className:"form-group pt-3 row kernel_settings",children:[Object(c.jsx)("p",{children:"Kernel:"}),e.kernel.map((function(t,n){return function(e,t,n,a){return Object(c.jsx)("div",{className:"col-4 mb-2",children:Object(c.jsx)("input",{type:"text",className:"form-control",value:e,onChange:n,onBlur:a},"kernel_input_".concat(t))},"kernel_input_div_".concat(t))}(t,n,(function(t){return function(t,n){var c=Object(f.a)(e.kernel);c[t]=n.target.value,e.setKernel(c),n.target.focus()}(n,t)}),(function(t){return function(t,n){var c=Object(f.a)(e.kernel);c[t]=parseFloat(n.target.value),e.setKernel(c)}(n,t)}))}))]})}n(35);function g(e){var t=null,n=null,a=r.a.useState({interval:null,kernel_size:3,kernel:[1/16,1/8,1/16,1/8,1/4,1/8,1/16,1/8,1/16],pixel_size:20,fps:100,image:new Image,background_color:"#e74c3c",canvas_height:640,canvas_width:640,tick_counter:{x:0,y:0},reset:!1}),l=Object(b.a)(a,2),s=l[0],i=l[1],j=function(){clearInterval(s.interval),i(Object(u.a)(Object(u.a)({},s),{},{interval:null,reset:!1}))},d=function(){null==s.interval?(s.tick_counter&&(t=s.tick_counter),n=setInterval((function(){return function(){t||(t={x:0,y:0});var e=Math.floor(s.canvas_width/s.pixel_size)-s.kernel_size,c=Math.floor(s.canvas_height/s.pixel_size)-s.kernel_size;if(t.y==c&&t.x==e)return j(),null;t.x<e?t.x+=1:(t.x=0,t.y<c&&(t.y+=1)),i(Object(u.a)(Object(u.a)({},s),{},{tick_counter:t,interval:n}))}()}),s.fps),i(Object(u.a)(Object(u.a)({},s),{},{interval:n,reset:!1}))):j()},f=function(e,t){i(Object(u.a)(Object(u.a)({},s),{},Object(o.a)({},e,t)))};return Object(c.jsxs)("section",{className:"container mario-canvas",children:[Object(c.jsx)("h1",{className:"mt-3 mb-4",children:"Filter visualization"}),Object(c.jsxs)("article",{className:"controls mb-5",children:[Object(c.jsx)("h3",{children:"Settings"}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-lg-6",children:Object(c.jsx)(h,{kernel_size:s.kernel_size,kernel:s.kernel,setKernel:function(e){return f("kernel",e)}},"kernel_settings")}),Object(c.jsxs)("div",{className:"col-lg-6",children:[Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"form-group pt-3 col-lg-4",children:[Object(c.jsx)("label",{htmlFor:"background_color",className:"form-label",children:"Background color: "}),Object(c.jsx)("input",{type:"color",className:"form-control",id:"background_color",value:s.background_color,onChange:function(e){return f(e.target.id,e.target.value)}})]}),Object(c.jsxs)("div",{className:"form-group pt-3 col-lg-4",children:[Object(c.jsx)("label",{htmlFor:"pixel_size",className:"form-label",children:"Pixel size: "}),Object(c.jsx)("input",{type:"number",className:"form-control",id:"pixel_size",value:s.pixel_size,onChange:function(e){return f(e.target.id,parseInt(e.target.value))}})]}),Object(c.jsxs)("div",{className:"form-group pt-3 col-lg-4",children:[Object(c.jsx)("label",{htmlFor:"speed",className:"form-label",children:"Speed: "}),Object(c.jsxs)("select",{value:s.fps,onChange:function(e){return f("fps",parseInt(e.target.value))},className:"form-control",id:"speed",children:[Object(c.jsx)("option",{value:"500",children:"Slow"}),Object(c.jsx)("option",{value:"100",children:"Normal"}),Object(c.jsx)("option",{value:"16",children:"Fast"}),Object(c.jsx)("option",{value:"0",children:"Ultra fast"})]})]})]}),Object(c.jsx)("button",{className:"btn btn-primary mt-4 btn-lg",onClick:function(){s.canvas_width&&s.canvas_height&&d()},style:{backgroundColor:s.background_color},children:s.interval?"Stop!":"GO!"}),null===s.interval&&Object(c.jsx)("button",{className:"btn btn-outline-primary mt-4 btn-lg d-inline-block ml-3 ",onClick:function(){t=null,i(Object(u.a)(Object(u.a)({},s),{},{interval:null,tick_counter:{x:0,y:0},reset:!0}))},style:{borderColor:s.background_color,color:s.background_color},children:"Reset"})]})]})]}),Object(c.jsx)(x,{state:s,kernel:s.kernel,tick_counter:s.tick_counter},"canvases")]})}var p=function(){return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("nav",{className:"navbar navbar-light bg-light container-paddings",children:Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("a",{className:"navbar-brand",href:"#",children:[Object(c.jsx)("img",{src:i,width:"30",height:"30",className:"d-inline-block align-top",style:{marginRight:"15px"},alt:"Mario"}),"Visualize"]})})}),Object(c.jsx)(g,{})]})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,l=t.getTTFB;n(e),c(e),a(e),r(e),l(e)}))};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root")),v()}},[[36,1,2]]]);
//# sourceMappingURL=main.6189ae8b.chunk.js.map