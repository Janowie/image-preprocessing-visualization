(this.webpackJsonpvisualize=this.webpackJsonpvisualize||[]).push([[0],{53:function(e){e.exports=JSON.parse('{"filter_gray_scale":{"args":null},"filter_threshold":{"args":[{"name":"threshold","type":"number","value":50,"min":0}]},"filter_custom_convolution":{"args":null}}')},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},82:function(e,t){},83:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),r=n.n(c),i=n(10),s=n.n(i),l=(n(69),n(70),n(19)),o=n(8),u=n(13);n.p,n(71);n(119),n(120),n(118),n(59),n(58),n(48),n(53),n(112);n(117);var f=n.p+"static/media/mario_bg.d6578ab6.png",x=n(116);function j(e){var t=r.a.useRef(null),n=r.a.useRef(null),c=r.a.useState({ctx:null,ctx_output:null}),i=Object(u.a)(c,2),s=i[0],l=i[1];r.a.useEffect((function(){t&&n&&(e.state.image.crossOrigin="anonymous",e.state.image.src=f,e.state.image.onload=function(){_(),l(Object(o.a)(Object(o.a)({},s),{},{ctx:t.current.getContext("2d"),ctx_output:n.current.getContext("2d")}))})}),[t,n]),r.a.useEffect((function(){s.ctx&&d(0,0)}),[s.ctx]),r.a.useEffect((function(){null==e.state.interval&&e.state.pixel_size>0&&_()}),[e.state.pixel_size,e.state.background_color]),r.a.useEffect((function(){e.tick_counter&&g()}));var j=function(t,n,a,c,r){t.beginPath(),t.moveTo(n,a),t.lineTo(c,r),t.strokeStyle="rgba(182,182,182,0.5)",e.state.pixel_size<3&&(t.strokeStyle="rgba(182,182,182,0.01)"),t.stroke()},p=function(t){for(var n=t.getContext("2d"),a=0;a<t.height;a+=e.state.pixel_size)j(n,0,a,t.width,a),j(n,a,0,a,t.height)},b=function(t){var n=t.getContext("2d"),a=e.state.pixel_size;n.fillStyle=e.state.background_color,n.fillRect(0,0,1e3,1e3),n.drawImage(e.state.image,a,a,t.height-2*a,t.width-2*a),p(t)},_=function(){b(t.current);var a=n.current.getContext("2d");a.fillStyle=e.state.background_color,a.fillRect(0,0,1e3,1e3),p(n.current)},h=function(e,t){return s.ctx?s.ctx.getImageData(e,t,1,1).data:[]},d=function(t,n){var a=e.state.kernel_size*e.state.pixel_size-1,c=2;s.ctx.fillStyle="rgba(44, 62, 80,0.5)",s.ctx.fillRect(t,n,a,a),s.ctx.strokeStyle="rgba(241, 196, 15,1.0)",s.ctx.strokeRect(t,n,a,a);for(var r=0;r<e.state.kernel_size;r++)for(var i=0;i<e.state.kernel_size;i++)c=1===i&&1===r?6:2,s.ctx.fillRect(t+e.state.pixel_size/2+e.state.pixel_size*i-c/2,n+e.state.pixel_size/2+e.state.pixel_size*r-c/2,c,c)},g=function(){if(!s.ctx)return null;var n=e.tick_counter.x*e.state.pixel_size,a=e.tick_counter.y*e.state.pixel_size;b(t.current);var c=function(t,n){for(var a=[],c=0;c<e.state.kernel_size;c++)for(var r=0;r<e.state.kernel_size;r++)a.push(h(t+e.state.pixel_size/2+e.state.pixel_size*r,n+e.state.pixel_size/2+e.state.pixel_size*c));return a}(n,a);d(n,a),function(t,n,a){s.ctx_output&&(s.ctx_output.fillStyle=a,s.ctx_output.fillRect(t,n,e.state.pixel_size,e.state.pixel_size))}(n+e.state.pixel_size,a+e.state.pixel_size,function(t,n,a){var c=e.kernel,r=function(e){for(var t=[],n=[],a=[],c=[],r=0;r<e.length;r++)t.push(e[r][0]),n.push(e[r][1]),a.push(e[r][2]),c.push(e[r][3]);return[t,n,a,c]}(a);return"rgba(".concat(Object(x.a)(r[0],c),",").concat(Object(x.a)(r[1],c),",").concat(Object(x.a)(r[2],c),",255)")}(0,0,c))};return Object(a.jsxs)("div",{className:"row mb-5",children:[Object(a.jsxs)("div",{className:"col-lg-6 col-md-12 col-sm-12",children:[Object(a.jsx)("h3",{children:" Original "}),Object(a.jsx)("canvas",{ref:t,width:"640",height:"640",children:"Your browser does not support the HTML5 canvas tag."})]}),Object(a.jsxs)("div",{className:"col-lg-6 col-md-12 col-sm-12",children:[Object(a.jsx)("h3",{children:" Filtered "}),Object(a.jsx)("canvas",{ref:n,width:"640",height:"640",children:"Your browser does not support the HTML5 canvas tag."})]})]})}function p(e){var t=r.a.useState(null),n=Object(u.a)(t,2),c=n[0],i=n[1];r.a.useEffect((function(){if(null===c)if(e.kernel.length)i(e.kernel);else{for(var t=[],n=0;n<Math.pow(e.kernel_size,2);n++)t.push(0);i(t)}}));var s=function(t,n){var a=c;a[n]=parseFloat(t.target.value),e.setKernel(a),i(a)};return Object(a.jsxs)("div",{className:"form-group pt-3",children:[Object(a.jsx)("br",{}),Object(a.jsx)("p",{children:"Kernel"}),c&&c.map((function(t,n){return n>0&&n%e.kernel_size===0?Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)("br",{},"kernel_input_br_".concat(n.toString())),Object(a.jsx)("input",{name:"kernel_input_".concat(n.toString()),type:"text",value:t||0,onChange:function(e){return s(e,n)},size:"3"},"kernel_input_".concat(n.toString()))]},"kernel_input_fragment_".concat(n.toString())):Object(a.jsx)("input",{name:"kernel_input_".concat(n.toString()),type:"text",value:t||0,onChange:function(e){return s(e,n)},size:"3"},"kernel_input_".concat(n.toString()))}))]})}function b(e){var t=null,n=r.a.useState({interval:null,kernel_size:3,kernel:[1/16,1/8,1/16,1/8,1/4,1/8,1/16,1/8,1/16],pixel_size:18,fps:100,image:new Image,background_color:"#e74c3c",canvas_height:640,canvas_width:640,tick_counter:{x:0,y:0}}),c=Object(u.a)(n,2),i=c[0],s=c[1],f=function(){t||(t={x:0,y:0});var e=Math.floor(i.canvas_width/i.pixel_size)-Math.floor(i.kernel_size/2)+2-i.kernel_size,n=Math.floor(i.canvas_height/i.pixel_size)+2-i.kernel_size;if(t.y==n-1&&t.x==e)return x(),null;t.x<e?t.x+=1:(t.x=0,t.y<n&&(t.y+=1)),s(Object(o.a)(Object(o.a)({},i),{},{tick_counter:t}))},x=function(){clearInterval(i.interval),s(Object(o.a)(Object(o.a)({},i),{},{interval:null,tick_counter:t}))},b=function(e,t){s(Object(o.a)(Object(o.a)({},i),{},Object(l.a)({},e,t)))};return Object(a.jsxs)("section",{className:"container mario-canvas",children:[Object(a.jsx)("h1",{className:"mt-3 mb-4",children:"Filter visualization"}),Object(a.jsxs)("article",{className:"controls mb-5",children:[Object(a.jsx)("h3",{children:"Options"}),Object(a.jsxs)("div",{className:"form-group pt-3",children:[Object(a.jsx)("label",{htmlFor:"background_color",className:"form-label",children:"Background color: "}),Object(a.jsx)("input",{type:"color",className:"form-control",id:"background_color",value:i.background_color,onChange:function(e){return b(e.target.id,e.target.value)}})]}),Object(a.jsxs)("div",{className:"form-group pt-3",children:[Object(a.jsx)("label",{htmlFor:"pixel_size",className:"form-label",children:"Pixel size: "}),Object(a.jsx)("input",{type:"number",className:"form-control",id:"pixel_size",value:i.pixel_size,onChange:function(e){return b(e.target.id,parseInt(e.target.value))}})]}),Object(a.jsxs)("div",{className:"form-group pt-3",children:[Object(a.jsx)("label",{htmlFor:"speed",className:"form-label",children:"Speed: "}),Object(a.jsxs)("select",{value:i.fps,onChange:function(e){return b("fps",parseInt(e.target.value))},className:"form-control",id:"speed",children:[Object(a.jsx)("option",{value:"500",children:"Slow"}),Object(a.jsx)("option",{value:"100",children:"Normal"}),Object(a.jsx)("option",{value:"16",children:"Fast"}),Object(a.jsx)("option",{value:"0",children:"Ultra fast"})]})]}),Object(a.jsx)(p,{kernel_size:i.kernel_size,kernel:i.kernel,setKernel:function(e){return b("kernel",e)}},"kernel_settings"),Object(a.jsx)("button",{className:"btn btn-primary mt-3",onClick:function(){i.canvas_width&&i.canvas_height&&function(){if(null==i.interval){i.tick_counter&&(t=i.tick_counter);var e=setInterval(f,i.fps);s(Object(o.a)(Object(o.a)({},i),{},{interval:e}))}else x()}()},children:"Start / stop animation"})]}),Object(a.jsx)(j,{state:i,kernel:i.kernel,tick_counter:i.tick_counter},"canvases")]})}function _(e){var t=r.a.useState({filtered_image:null,canvas_dimensions:{}}),n=Object(u.a)(t,2);n[0],n[1];return Object(a.jsx)("div",{children:Object(a.jsx)(b,{})})}var h=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(_,{})})},d=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,122)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(h,{})}),document.getElementById("root")),d()}},[[83,1,2]]]);
//# sourceMappingURL=main.e0837073.chunk.js.map